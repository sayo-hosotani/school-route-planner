# 通学路マップ

小中学校で毎年提出が必要な「通学路の地図」を、ユーザー登録なし・簡単操作で作成できるWebアプリケーション。

## 公開URL

https://sayo-hosotani.github.io/school-route-planner/

## 制限

2026/01/27現在、経路の自動生成は関東地方のみ利用可能

## 主な機能

- クリックまたは住所検索でポイントを配置、道路に沿った経路を自動生成
- 地図上のポイントをドラッグして経路を調整、ワンクリックでコメント追加・順序変更
- 経路情報のセッション内保存、JSON形式でのエクスポート/インポート
- サーバーへのデータ送信は行わず、フロントのみで完結

## 技術スタック

| カテゴリ | 技術 |
|---------|------|
| フロントエンド | React, TypeScript, Vite |
| 地図 | React Leaflet, 国土地理院タイル |
| 経路計算 | Valhalla API |
| ジオコーディング | 国土地理院 API |
| ホスティング | GitHub Pages (Frontend), Fly.io (API) |
| 開発ツール | Biome, Vitest |

## Quick Start

```bash
# 1. 依存関係インストール
npm install

# 2. Valhalla起動（初回は10-20分かかります）
docker-compose up -d valhalla

# 3. 開発サーバー起動
npm run dev
```

- フロントエンド: http://localhost:5173
- Valhalla API: http://localhost:8002

## アーキテクチャ

```
┌─────────────────────┐      ┌─────────────────────┐
│   React App         │      │   Valhalla API      │
│   (GitHub Pages)    │ ──── │   (Fly.io)          │
│                     │      │                     │
│ - 地図表示・操作     │      │ - 経路計算          │
│ - ポイント管理       │      │ - OSMデータ         │
│ - メモリ上データ管理 │      │                     │
└─────────────────────┘      └─────────────────────┘
```

**設計方針**
- バックエンドサーバーなし（静的ホスティングのみ）
- データベースなし（経路データはメモリ上で管理、ブラウザリロードでクリア）
- ユーザー認証なし（個人利用前提）

## ドキュメント

| ファイル | 内容 |
|---------|------|
| [DOCUMENT.md.md](./DOCUMENT.md.md) | 機能仕様、アーキテクチャ詳細、開発ガイド |
| [CLAUDE.md](./CLAUDE.md) | 開発者向けクイックリファレンス |
| [TODO.md](./TODO.md) | 未完了タスク |
